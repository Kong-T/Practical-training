<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="../../Student/css/StuNav.css">
  <link rel="stylesheet" type="text/css" href="../css/tnotice.css">

  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css"
    integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <title>教师端通知公告</title>
  <script type="text/javascript">
    window.onload = function () {
      var name = "Tnotice";
      $.ajax({
        url: "http://localhost:8080/All_getnotice",
        type: "post",
        data: name, //点击页面名Tnotice
        success: function (data) {
          /*这个方法里是ajax发送请求成功之后执行的代码*/
          console.log("from 后端");
          console.log(data.time);
          console.log(data.title);
          window.length  =data.title.length;//获取一个全局变量 用于表示小组数量
          // window.time = data.time;
          // window.title = data.title;

          // console.log(window.length,window.time,window.title);
          showData(data);//我们仅做数据展示
        },
        error: function (msg) {
          alert("ajax连接异常：" + msg);
          console.log("error");
        }
      })
      function showData(data) {
       
        var str = "";//定义用于拼接的字符串
        for (var j = 0; j < window.length; j++){
          var searchUrl =encodeURI("search.html?searchText="+data.title[j]);   //使用encodeURI编码
          str += "<li>" + "<a href = \"notice.html?Notice_title="+searchUrl+" \" target=\"_blank\">"+data.title[j] + data.time[j] + "</a></li>";
          console.log(str);
          $("#ol").html(str);

        }

      }
    }
  </script>
  
</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="example-navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a class="icon-bar" href="#">方正实训</a>
          </li>
          <li class="active"><a href="Tnotice.html">通知公告</a>
          </li>
          <li><a href="TBord.html">留言板</a>
          </li>
          <li><a href="topicRelease.html">发布题目</a>
          </li>
          <li><a href="guide_grade.html"  onclick="javascript:requestData()">录入指导成绩</a>
          </li>
          <li><a href="report_grade.html">答辩打分</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="..\..\usercenter\html\teacherCenter.html" id="navbarDropdown"
              role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">我的</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="title">
    <div class="fz40"></div><a>通知公告</a>
  </div>
  <div class="b"><a href="/notice/years.html" class="more"><i>查看更多>></i></a></div>
  </div>
  <hr />

  <ol id = "ol">
    
  </ol>
  <div class="tan"></div>


</body>

</html>