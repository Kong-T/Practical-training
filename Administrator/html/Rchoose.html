<html>

<head>
    <meta charset="utf-8">
    <title>分组调整</title>
    <link rel="stylesheet" type="text/css" href="../css/Reteam.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<script type="text/javascript">
    window.onload = function () {
        // // 请求后端数据
        // $.ajax({
        //     url: "http://localhost:8080/",
        //     type: "post",
        //     data: name,
        //     success: function (data) {
        //         showData(data);//我们仅做数据展示
        //     },
        //     error: function (msg) {
        //         alert("ajax连接异常：" + msg);
        //         console.log("error");
        //     }
        // })

        // 展示数据
        function showData(data) {
            var str = "";//定义用于拼接的字符串
            for (var i = 0; i < data.length; i++) {
                console.log(data.length);
                console.log(i);
                console.log(data[i]);
                for (var i in data.Team_id) {
                    var TeamID = "Team_id[" + i + "]";
                    for (var j in data.Leader_id) {
                        var LeaderID = "Leader_id" + j;
                        for (var k in data.Leader_name) {
                            var LeaderNameID = "LeaderName_id" + k;
                            for (var l in data.Topic) {
                                var TopicID = "Topic_id" + l;
                                for (var m in data.Tutor) {
                                    var TutorID = "Tutor_id" + m;
                                    str += "<tr><td id=\"TeamID\">" + data.Team_id[i] + "</td><td id=\"LeaderID\">" + data.Leader_id[j] + "</td><td id=\"LeaderNameID\">" + data.Leader_name[k] + "</td><td id=\"TopicID\">" + data.Topic_id[l] + "</td><td id=\"TutorID\">" + data.Tutor[m] + "</td><td><button type=\"button\" class=\"btn btn - primary\" id=\"btn\"" + m + ">删除</button></td></tr>"
                                }
                            }

                            console.log(str);
                        }

                    }
                }
            }
            $("tbody").append(str);

        }

        //管理员操作
        //给每个按钮绑定事件
        var btns = document.getElementsByTagName("button");//获取所有btn对象
        for (var i = 0; i < btns.length; i++) {
            console.log(btns[i].id);//输出获取到的每个按钮
            btns[i].addEventListener("click", del);//给每个按钮绑定change事件
        }

        function del() {
            var btn_now = this.id;//获取当前被点击的按钮
            console.log(btn_now.substr(btn_now.length - 1, 1))//获取当前被点击的按钮的编号
            var tr = $(this).parents('tr');          //获取被点击按钮所在的当前行
            if (confirm("确定删除该小组？")) {
                var Team_id_now = "Team_id[" + btn_now.substr(btn_now.length - 1, 1) + "]" //找到这一行的Team_id
                console.log(Team_id_now)
                var Team_id_Value = document.getElementById(Team_id_now).innerHTML
                console.log(Team_id_Value)
                tr.remove();
            }


            $.ajax({
                type: "POST",
                url: "http://localhost:8080/",
                data: JSON.stringify({ "TeamID": Team_id_Value }), //将JSON对象转为字符串
                dataType: "JSON",
                contentType: "application/json",
                async: 'true',
                beforeSend: function (XMLHttpRequest, settings) {
                    //ShowLoading();
                    // console.log($.ajax.data);
                },
                success: function () {
                    alert("success");
                },
                error: function () {
                    //请求出错处理
                    console.log("error");

                },

            })

        }



    }








</script>

<body>
    <div class="jumbotron">
        <h1>方正实训</h1>
        <span class="glyphicon glyphicon-bell" style="font-size:20px;"></span><b style="font-size: 20px;">当前位置：<a
                href="main.html" style=" text-decoration:underline">首页</a>/选题调整</b>

        </span>
        <div class="exit ">
            <p>退出
                <a href="../../website_tan/html/first.html"><i class="fa fa-arrow-circle-right"
                        style="font-size:30px"></i></a></p>
        </div>
    </div>
    <div class="container">
        <table class="table table-striped table-responsive table-bordered table-hover" style="text-align: center;">
            <thead>
                <tr>
                    <th style="text-align:center">小组编号</th>
                    <th style="text-align:center">组长学号</th>
                    <th style="text-align:center">组长姓名</th>
                    <th style="text-align:center">选题</th>
                    <th style="text-align:center">指导老师</th>
                    <th style="text-align:center">操作</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td id="Team_id[0]">01</td>
                    <td id="Leader_id[0]">41811023</td>
                    <td id="LeaderName_id[0]">商春楠</td>
                    <td id="Topic_id[0]">实训辅助管理系统</td>
                    <td id="Tutor_id[0]">周峰</td>
                    <td><button id="btn0">删除</button></td>
                </tr>
                <tr>
                    <td>02</td>
                    <td>41811023</td>
                    <td>王元浩</td>
                    <td>实训辅助管理系统</td>
                    <td>周峰</td>
                    <td><button>删除</button></td>
                </tr>
                <tr>
                    <td>03</td>
                    <td>41811023</td>
                    <td>项俊</td>
                    <td>实训辅助管理系统</td>
                    <td>周峰</td>
                    <td><button>删除</button></td>
                </tr>
                <tr>
                    <td>04</td>
                    <td>41811022</td>
                    <td>谭贺娟</td>
                    <td>实训辅助管理系统</td>
                    <td>周峰</td>
                    <td><button>删除</button></td>
                </tr>
            </tbody>
        </table>
        <form class=" form-inline" role="form">
            <div class="form-group">
                <label class="sr-only" for="name">名称</label>
                <input type="text" class="form-control" id="name" placeholder="请输入名称">
            </div>
            <div class="form-group">
                <label class="sr-only" for="inputfile">文件输入</label>
                <input type="file" id="inputfile">
            </div>
            <button type="submit" class="btn btn-default">提交</button>
        </form>
        <p><button class="btn btn-primary" type="button"><b>完成</b></button></button></p>
    </div>
</body>

</html>