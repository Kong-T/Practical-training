<html>

<head>
    <meta charset="utf-8">
    <title>填报选题</title>
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/Topic_Choose.css">
    <link rel="stylesheet" type="text/css" href="../css/StuNav.css">
    
    <link href="../../Teacher/css/blog.css" rel="stylesheet">
    <link href="../../assets4.5/dist/css/bootstrap.css" rel="stylesheet">
  
    <link rel=" stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript"></script>
</head>
<script>
    //请求选题数据
    window.onload = function () {
        var name = "Topic_Choose";//当前网页名
        $.ajax({
            url: "http://localhost:8080/querySubject",
            type: "post",
            data: name,
            success: function (data) {
                /*这个方法里是ajax发送请求成功之后执行的代码*/
               // var data=JSON.parse(data);//解析JSON数据
                showTopicData(data);
			  console.log(data)

            },
            error: function (msg) {
                alert("ajax连接异常：" + msg);
                console.log("error");

            }
        });
    }
    //展示选题概况
    function showTopicData(data) {
        var str = "";
        for (var i = 0; i < data.subject.length; i++) {
            var Topicid ="Topicid"+i;
            str += "<div class='col-sm-6 col-md-4'><div class='caption'><img src='../image/Topic_img/实训题目.png' alt='...' style='width:100%; height:200px;'><h3>"
                + data.subject[i].subjectTitle + "</h3><p>指导教师：" + data.subject[i].tutor
                + "</p><p><a href='#' class='btn btn-primary' role='button'id='"+Topicid+"' onclick='SentData()'>填报选题</a></p></div></div>"

        }
        $("#div1").html(str);
    }
    $(document).click(function (e) {
        Topic_id = e.target.id;
        console.log("函数内" + Topic_id);
        SentData(Topic_id)
      });
    //传送选题情况
    function SentData(Topic_id) {
        Topic_id=document.getElementById(Topic_id).innerText;
        $.ajax({
            type: "POST",
            url: "http://localhost:8080/addChoose",
            data: JSON.stringify(Topic_id), //将JSON对象转为字符串
            dataType: "JSON",
            success: function () {
                alert("填报成功！");
            },
            error: function () {
                alert("填报出错！");
                //请求出错处理
            }
        })
    }
    


</script>

<body>
    <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
          <!-- <div class="col-4 pt-1">
            <a class="text-muted" href="#">实训</a>
          </div> -->
          <div class="col-4">
            <a class="blog-header-logo text-dark">实训</a>
          </div>
          <div class="col-4 d-flex justify-content-end align-items-center">
            <a class="text-muted" href="#" aria-label="Search">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="mx-3" role="img"
                viewBox="0 0 24 24" focusable="false">
                <title>Search</title>
                <circle cx="10.5" cy="10.5" r="7.5" />
                <path d="M21 21l-5.2-5.2" />
              </svg>
            </a>
            <a class="btn btn-sm btn-outline-secondary" href="Stu_userCenter.html">我的</a>
          </div>
        </div>
      </header>
    
      <div class="nav-scroller py-1 mb-2">
        <nav class="nav d-flex justify-content-between">
          <a class="p-2 text-muted" href="notice1.html">通知公告</a>
          <a class="p-2 text-muted" href="Board.html">留言板</a>
          <a class="p-2 text-muted" href="teamfill.html">填报小组</a>
          <a class="p-2 text-muted" href="Topic_Choose.html">填报选题</a>
          <!-- <a class="p-2 text-muted" href="#">Business</a>
          <a class="p-2 text-muted" href="#">Politics</a>
          <a class="p-2 text-muted" href="#">Opinion</a>
          <a class="p-2 text-muted" href="#">Science</a>
          <a class="p-2 text-muted" href="#">Health</a>
          <a class="p-2 text-muted" href="#">Style</a>
          <a class="p-2 text-muted" href="#">Travel</a> -->
        </nav>
      </div>
    <div class="container">
        <div class="row" id="div1">


        </div>
    </div>