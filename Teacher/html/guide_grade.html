<html>

<head>
  <meta charset="utf-8">
  <title>Bootstrap 布局实例</title>
  <link rel="stylesheet" type="text/css" href="../css/guide_grade.css">
  <link rel="stylesheet" type="text/css" href="../../Student/css/StuNav.css">
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
  function requestData()
  {
    var name="guide_grade";
      $.ajax({
          url: "http://localhost:8080/helloworld_war_exploded/list",
          type: "post",
          data:name, //点击页面名guide_grade
          success: function(data){
              /*这个方法里是ajax发送请求成功之后执行的代码*/
              showData(data);//我们仅做数据展示
          },
          error: function(msg){
              alert("ajax连接异常："+msg);
          }
      });
  }
  function showData(data)
  {
      var str = "";//定义用于拼接的字符串
      for (var i = 0; i < data.length; i++)
      {
          str = "<tr><td>" + data[i].teamId + "</td><td><input type=\"text"+"id=\"gradeId\""+i+" "+"placeholder=\"请输入分数\"></td></tr>"
          $("#tbody").append(str);
      }
  }

  function guideGraderelease(data) {
      var str0 = new Array();
      var gradeID = new Array();                  //小组分数
     var str;
     for(var i=0;i<data.length;i++){
       str0[i] = "#gradeId"+i;                    //小组id
      gradeID[i] = $(str0[i]).val();              //老师评分
         str = str + "{\"teamId\""+i+":"+"\"teamId\""+i+","+"\"gradeId\""+i+":"+gradeID[i]+"}，";
     }
     var guideGrade="["+str+"]";//转为json
     $.ajax({
         type:"POST",
         url:"http://localhost:8080/login",
         data:guideGrade,
         dataType:"JSON",
         contentType:"application/json",
         async:'true',
         success:function(data) {
          if(data.msg == true){
                   alert("指导成绩上传成功");}     
         },
         error: function(){
   //请求出错处理
         console.log("指导成绩上传失败");

  },

     })

  }
</Script>

</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="example-navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a class="icon-bar" href="#">方正实训</a>
          </li>
          <li><a href="Tnotice.html">通知公告</a>
          </li>
          <li><a href="TBord.html">留言板</a>
          </li>
          <li><a href="topicRelease.html">发布题目</a>
          </li>
          <li class="active"><a href="guide_grade.html" >录入指导成绩</a>
          </li>
          <li><a href="report_grade.html">答辩打分</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="..\usercenter\html\teacherCenter.html" id="navbarDropdown"
              role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">我的</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th style="text-align: center;">我指导的小组</th>
          <th style="text-align: center;">指导教师评分</th>
        </tr>
      </thead>
      <tbody>
        <tr>

        </tr>
      </tbody>
    </table>
    <button type="button" class="btn btn-primary" onclick="guideGraderelease()" style="margin-top: 30px;">提 交</button>
  </div>

</body>